<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kriptografi by.c</title>

<style>
body{
    background:#020617;
    color:#fff;
    font-family:Arial, sans-serif;
    display:flex;
    justify-content:center;
    align-items:center;
    min-height:100vh;
}

.container{
    background:#0f172a;
    padding:20px;
    border-radius:14px;
    max-width:650px;
    width:100%;
    box-shadow:0 0 25px rgba(34,197,94,.4);
}

h1{
    text-align:center;
    color:#22c55e;
}

label{
    margin-top:10px;
    display:block;
    color:#a7f3d0;
}

textarea,input,select{
    width:100%;
    padding:10px;
    margin-top:6px;
    border-radius:8px;
    border:1px solid #134e4a;
    background:#020617;
    color:#fff;
}

textarea{height:80px}

button{
    margin-top:12px;
    padding:12px;
    width:100%;
    background:#22c55e;
    border:none;
    border-radius:8px;
    font-weight:bold;
    color:#022c22;
    cursor:pointer;
}

button:hover{background:#4ade80}

.result{
    margin-top:10px;
    padding:10px;
    border:1px solid #22c55e;
    border-radius:8px;
    white-space:pre-line;
    font-size:13px;
}

#steps{
    border:1px dashed #4ade80;
    color:#d1fae5;
}

.footer{
    text-align:center;
    font-size:12px;
    color:#a7f3d0;
    margin-top:10px;
}

.footer span{
    color:#22c55e;
    font-weight:bold;
}
</style>
</head>
<body>

<div class="container">
    <h1>KRIPTOGRAFI</h1>
    
    <label>PILIH METODE NYA DER</label>
    <select id="method" onchange="toggleInput()">
        <option value="caesar">Caesar Cipher</option>
        <option value="vigenere">VigenÃ¨re Cipher</option>
    </select>

    <label>OPSI NYA</label>
    <select id="mode">
        <option value="encrypt">ðŸ”’ Menyembunyikan Kata (Enkripsi)</option>
        <option value="decrypt">ðŸ”“ Menampilkan Kata Asli (Dekripsi)</option>
    </select>

    <label>Masukkan Teks</label>
    <textarea id="text" placeholder="Masukin teksnya der..."></textarea>

    <div id="shiftBox">
        <label>Kunci (Caesar)</label>
        <input type="number" id="shift" value="3">
    </div>

    <div id="keyBox" style="display:none">
        <label>Kunci (VigenÃ¨re)</label>
        <input type="text" id="key" placeholder="Masukin kata kunci nya der...">
    </div>

    <button onclick="process()">Konfirmasi</button>

    <label>Hasil</label>
    <div class="result" id="result">â€”</div>

    <label>Caranya</label>
    <div class="result" id="steps">â€”</div>

    <div class="footer">
        Â© 2025 â€¢ Dibuat oleh <span>Candra winata</span>
    </div>

</div>

<script>
function toggleInput(){
    let m = method.value;
    shiftBox.style.display = m === "caesar" ? "block" : "none";
    keyBox.style.display   = m === "vigenere" ? "block" : "none";
}

/* ================= CAESAR ================= */
function caesar(text, shift){
    let res = "", step = "";
    text = text.toUpperCase();

    for(let c of text){
        if(/[A-Z]/.test(c)){
            let x = c.charCodeAt(0) - 65;
            let y = (x + shift + 26) % 26;
            res += String.fromCharCode(y + 65);
            step += `${c} (${x}) ${shift >= 0 ? '+' : '-'} ${Math.abs(shift)} = ${String.fromCharCode(y + 65)} (${y})\n`;
        }else{
            res += c;
        }
    }

    steps.innerText = "CAESAR CIPHER\n\n" + step;
    return res;
}

/* ================ VIGENERE ================= */
function vigenereEncrypt(text, key){
    text = text.toUpperCase().replace(/[^A-Z]/g,"");
    key  = key.toUpperCase();

    let res = "", step = "", j = 0;

    for(let i = 0; i < text.length; i++){
        let p = text.charCodeAt(i) - 65;
        let k = key.charCodeAt(j % key.length) - 65;
        let c = (p + k) % 26;

        res += String.fromCharCode(c + 65);
        step += `(${text[i]} ${p}) + (${key[j % key.length]} ${k}) = ${String.fromCharCode(c + 65)} (${c})\n`;
        j++;
    }

    steps.innerText = "VIGENERE ENKRIPSI\n\n" + step;
    return res;
}

function vigenereDecrypt(text, key){
    text = text.toUpperCase().replace(/[^A-Z]/g,"");
    key  = key.toUpperCase();

    let res = "", step = "", j = 0;

    for(let i = 0; i < text.length; i++){
        let c = text.charCodeAt(i) - 65;
        let k = key.charCodeAt(j % key.length) - 65;
        let p = (c - k + 26) % 26;

        res += String.fromCharCode(p + 65);
        step += `(${text[i]} ${c}) - (${key[j % key.length]} ${k}) = ${String.fromCharCode(p + 65)} (${p})\n`;
        j++;
    }

    steps.innerText = "VIGENERE DEKRIPSI\n\n" + step;
    return res;
}

/* ================= MAIN ================= */
function process(){
    let m = method.value;
    let modeVal = mode.value;

    if(m === "caesar"){
        let s = parseInt(shift.value);
        result.innerText = modeVal === "encrypt"
            ? caesar(text.value, s)
            : caesar(text.value, -s);
    }else{
        if(!key.value){
            alert("Key wajib diisi!");
            return;
        }

        if(!/^[A-Za-z]+$/.test(key.value)){
            alert("Key hanya boleh huruf!");
            return;
        }

        result.innerText = modeVal === "encrypt"
            ? vigenereEncrypt(text.value, key.value)
            : vigenereDecrypt(text.value, key.value);
    }
}

/* JALANKAN SAAT LOAD */
toggleInput();
</script>

</body>
</html>
